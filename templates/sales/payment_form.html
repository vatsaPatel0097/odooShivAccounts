{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card p-3">
    <h4>Receive Payment for Invoice INV/{{ inv.pk }}</h4>
    <p><strong>Customer:</strong> {{ inv.customer }}</p>
    <p><strong>Outstanding:</strong> {{ outstanding }}</p>

    <form method="post" class="mt-3">{% csrf_token %}
      <div class="mb-3">
        <label class="form-label">Payment Method</label>
        <select name="method" class="form-select">
          <option value="bank" {% if default_method == 'bank' %}selected{% endif %}>Bank</option>
          <option value="cash" {% if default_method == 'cash' %}selected{% endif %}>Cash</option>
          <option value="cheque">Cheque</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Account</label>
        <select name="account" class="form-select">
          {% for a in payment_accounts %}
            <option value="{{ a.pk }}" {% if a.pk == default_account %}selected{% endif %}>{{ a.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Amount</label>
        <input type="number" step="0.01" name="amount" value="{{ outstanding }}" class="form-control" />
      </div>

      <div class="mb-3">
        <label class="form-label">Reference</label>
        <input type="text" name="reference" class="form-control" />
      </div>

      <button type="submit" class="btn btn-primary">Confirm Payment</button>
      <a href="{% url 'customer_invoice_detail' inv.pk %}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
</div>
{% endblock %}
