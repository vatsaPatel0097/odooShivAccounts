{# templates/payments/payment_form.html #}
{% extends "base.html" %}
{% block content %}
<div class="container" style="max-width:800px; margin-top:30px;">
  <div class="card" style="background:#1a1a1a; color:#fff; border:1px solid #333; padding:20px;">
    <h3>Pay Vendor Bill: {{ bill }}</h3>
<p><strong>Vendor:</strong> {{ bill.vendor }}</p>
<p><strong>Total Bill:</strong> {{ total_bill }}</p>
<p><strong>Already Paid:</strong> {{ paid_already }}</p>
<p><strong>Outstanding:</strong> {{ outstanding }}</p>


    <form method="post">
      {% csrf_token %}
      <div class="form-group mb-2">
        <label>Payment Method</label>
        <select name="method" class="form-control">
          <option value="bank" {% if default_method == 'bank' %}selected{% endif %}>Bank</option>
          <option value="cash" {% if default_method == 'cash' %}selected{% endif %}>Cash</option>
          <option value="cheque">Cheque</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="form-group mb-2">
        <label>Account (Cash / Bank)</label>
        <select name="account" class="form-control">
          {% for a in payment_accounts %}
            <option value="{{ a.pk }}" {% if a.pk == default_account %}selected{% endif %}>{{ a.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group mb-2">
        <label>Amount</label>
        <input type="number" step="0.01" name="amount" class="form-control" value="{{ outstanding }}" required />
      </div>

      <div class="form-group mb-2">
        <label>Reference (optional)</label>
        <input type="text" name="reference" class="form-control" />
      </div>

      <div class="mt-3">
        <button type="submit" class="btn btn-success">Confirm Payment</button>
        <a href="{% url 'vendor_bill_detail' bill.pk %}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
