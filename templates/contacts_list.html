{% comment %} {% extends 'base.html' %} {% endcomment %}
{% load static %}

{% block content %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Master - List View</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --card:#ffffff;
      --accent:#ef4444;
      --circle:#f05252;
      --muted:#475569;
      --soft-shadow: 0 10px 25px rgba(40,40,80,0.08);
      --table-border: #eee;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(35deg, #f7e6f3, #e2eafc, #b3d1ff, #f3dff7);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px;
    }
    .frame{
      width:95%;
      max-width:1180px;
      background:var(--card);
      border-radius:24px;
      padding:34px 48px;
      box-shadow: var(--soft-shadow);
      position:relative;
    }
    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
    }
    .left-links, .right-links{
      display:flex;
      gap:18px;
      align-items:center;
      font-weight:500;
      color:var(--muted);
      letter-spacing:0.2px;
    }
    .right-links a{ color: inherit; text-decoration:none }
    h1{font-size:24px;margin:6px 0 0 0;text-align:center;color:var(--accent)}
    .subtitle{display:block;text-align:center;color:var(--muted);margin-bottom:26px}
    .table-container{ overflow-x:auto; }
    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 10px;
    }
    th, td{
      text-align:left;
      padding:12px 16px;
      border-bottom:1px solid var(--table-border);
    }
    th{
      font-weight:600;
      color:#999;
      font-size:14px;
      text-transform:uppercase;
      letter-spacing:0.5px;
    }
    tr:last-child td{ border-bottom:none; }
    .contact-row:hover{ background-color: #f9f9f9; cursor:pointer; }
    .avatar-small{
      width:40px;
      height:40px;
      border-radius:50%;
      background-size:cover;
      background-position:center;
    }
    .avatar-cell{ display:flex; align-items:center; }
    /* pagination styles */
    .pagination-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
      gap: 10px;
    }
    .pagination-controls span, .pagination-controls a {
      padding: 8px 12px;
      border-radius: 8px;
      border:1px solid var(--table-border);
      text-decoration:none;
      color: var(--muted);
    }
    .pagination-controls .active {
      background:var(--accent);
      color:#fff;
      border-color:var(--accent);
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="topbar">
      <div class="left-links">
        <a href="{% url 'contacts_add' %}" class="btn">New</a>
      </div>
      <div style="flex:1"></div>
      <div class="right-links">
        <a href="{% url 'dashboard' %}">Home</a>
        <a href="javascript:history.back()">Back</a>
      </div>
    </div>

    <h1>Contact Master</h1>
    <div class="subtitle">List View</div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Image</th>
            <th>Contact Name</th>
            <th>Type</th>
            <th>Email</th>
            <th>Phone</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for c in contacts %}
          <tr class="contact-row">
            <td class="avatar-cell">
              {% if c.profile_image %}
                <div class="avatar-small" style="background-image:url('{{ c.profile_image.url }}')"></div>
              {% else %}
                <div class="avatar-small" style="background:#ccc"></div>
              {% endif %}
            </td>
            <td>{{ c.name }}</td>
            <td>{{ c.contact_type|title }}</td>
            <td>{{ c.email|default:"-" }}</td>
            <td>{{ c.mobile|default:"-" }}</td>
            <td>
              <a href="{% url 'contacts_detail' c.id %}" class="btn btn-sm btn-outline">Open</a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="6">No contacts yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Django pagination -->
    {% if is_paginated %}
    <div class="pagination-controls">
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
      {% else %}
        <span>Previous</span>
      {% endif %}

      {% for num in paginator.page_range %}
        {% if page_obj.number == num %}
          <span class="active">{{ num }}</span>
        {% else %}
          <a href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Next</a>
      {% else %}
        <span>Next</span>
      {% endif %}
    </div>
    {% endif %}
  </div>
</body>
</html>
{% endblock %}