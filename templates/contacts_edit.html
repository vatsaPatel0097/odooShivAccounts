{% extends 'base.html' %}
{% block content %}
<div class="card p-4" style="max-width:720px;">
  <h4>Edit Contact</h4>
  {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
  <form method="post" enctype="multipart/form-data">{% csrf_token %}
    <div class="mb-2">
      <label>Name</label>
      <input name="name" class="form-control" value="{{ contact.name }}" required/>
    </div>

    <div class="mb-2">
      <label>Type</label>
      <select name="contact_type" class="form-control">
        <option value="customer" {% if contact.contact_type == "customer" %}selected{% endif %}>Customer</option>
        <option value="vendor" {% if contact.contact_type == "vendor" %}selected{% endif %}>Vendor</option>
        <option value="both" {% if contact.contact_type == "both" %}selected{% endif %}>Both</option>
        
      </select>
    </div>

    <div class="mb-2"><label>Email</label><input name="email" class="form-control" value="{{ contact.email }}"/></div>
    <div class="mb-2"><label>Phone</label><input name="mobile" class="form-control" value="{{ contact.mobile }}"/></div>
    <div class="mb-2"><label>City</label><input name="city" class="form-control" value="{{ contact.city }}"/></div>
    <div class="mb-2"><label>State</label><input name="state" class="form-control" value="{{ contact.state }}"/></div>
    <div class="mb-2"><label>Pincode</label><input name="pincode" class="form-control" value="{{ contact.pincode }}"/></div>

    <div class="mb-2">
      <label>Profile Image</label>
      {% if contact.profile_image %}
        <div class="mb-2">
          <img src="{{ contact.profile_image.url }}" alt="Photo" style="height:80px;width:80px;border-radius:6px;">
        </div>
      {% endif %}
      <input type="file" name="profile_image" class="form-control"/>
      <small class="form-text text-muted">Upload to replace existing image (optional).</small>
    </div>

    <button class="btn btn-primary">Save</button>
    <a href="{% url 'contacts_detail' contact.id %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>
{% endblock %}
