{% extends "base.html" %}
{% block content %}
<div class="container">
  <h2>Profit & Loss ({{ start }} — {{ end }})</h2>
  {% if fallback_full_history %}
    <div class="alert alert-info">No entries in selected range — showing full history for development/testing.</div>
  {% endif %}

  <div class="card">
    <div class="card-header">Expenses</div>
    <div class="card-body">
      {% if expenses %}
      <table class="table">
        <thead><tr><th>Account</th><th>Amount</th></tr></thead>
        <tbody>
          {% for e in expenses %}
            <tr><td>{{ e.account }}</td><td style="text-align:right">{{ e.amount }}</td></tr>
          {% endfor %}
        </tbody>
        <tfoot><tr><th>Total</th><th style="text-align:right">{{ total_expenses }}</th></tr></tfoot>
      </table>
      {% else %}
        <p>No expense entries found for this period.</p>
      {% endif %}
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-header">Income</div>
    <div class="card-body">
      {% if income %}
      <table class="table">
        <thead><tr><th>Account</th><th>Amount</th></tr></thead>
        <tbody>
          {% for i in income %}
            <tr><td>{{ i.account }}</td><td style="text-align:right">{{ i.amount }}</td></tr>
          {% endfor %}
        </tbody>
        <tfoot><tr><th>Total</th><th style="text-align:right">{{ total_income }}</th></tr></tfoot>
      </table>
      {% else %}
        <p>No income entries found for this period.</p>
      {% endif %}
    </div>
  </div>

  <div class="mt-3">
    <h4>Net: {{ net }}</h4>
  </div>
</div>
{% endblock %}
